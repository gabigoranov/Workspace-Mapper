<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:viewModels="clr-namespace:WorkflowManager.ViewModels"
             xmlns:partial="clr-namespace:WorkflowManager.Views.Partial"
             x:Class="WorkflowManager.Views.HomeView"
             x:DataType="viewModels:HomeViewModel">

    <UserControl.Styles>
        <Style Selector="Border.ActionBanner">
            <Setter Property="UseLayoutRounding" Value="False"/>
            <Setter Property="Background" Value="{DynamicResource Color.Card}"/>
            <Setter Property="BorderThickness" Value="{DynamicResource Border.Thin.Bottom}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource Color.Border}"/>
            <Setter Property="Padding" Value="{DynamicResource Spacing.Combo.Xl.Sm}"/>
        </Style>

        <Style Selector="Path.SearchIcon">
            <Setter Property="StrokeThickness" Value="{DynamicResource Border.Medium}"/>
            <Setter Property="Stroke" Value="{DynamicResource Color.Text.Secondary}"/>
            <Setter Property="Fill" Value="Transparent"/>
        </Style>

        <Style Selector="Button.CreateButton">
            <Setter Property="CornerRadius" Value="{DynamicResource Border.Radius.Sm}"/>
            <Setter Property="Padding" Value="{DynamicResource Spacing.Combo.Lg.Sm}"/>
        </Style>

        <Style Selector="Path.AddIcon">
            <Setter Property="StrokeThickness" Value="{DynamicResource Border.Medium}"/>
            <Setter Property="Stroke" Value="{DynamicResource Color.Text.OnAccent}"/>
            <Setter Property="Fill" Value="Transparent"/>
        </Style>

        <Style Selector="Border.MainContentWrapper">
            <Setter Property="Padding" Value="{DynamicResource Spacing.Horizontal.2Xl}"/>
        </Style>
    </UserControl.Styles>

    <Grid RowDefinitions="Auto, *" RowSpacing="{DynamicResource Spacing.2Xl}">
        <!-- Header -->
        <Border Grid.Row="0" Classes="ActionBanner">
            <Grid ColumnDefinitions="*,Auto" ColumnSpacing="{DynamicResource Spacing.3Xl}">
                <!-- Search -->
                <Grid ColumnDefinitions="*, Auto" HorizontalAlignment="Stretch" ColumnSpacing="{DynamicResource Spacing.Sm}">
                    <TextBox HorizontalAlignment="Stretch" 
                             Text="{Binding SearchText}" 
                             Watermark="Search Workflows..."  />
                    
                    <Viewbox Grid.Column="1" Width="20" Height="20" VerticalAlignment="Center">
                        <Path Classes="SearchIcon" Data="{DynamicResource SearchRegular}"/>
                    </Viewbox>
                </Grid>

                <!-- New workflow button -->
                <Button Grid.Column="1" 
                        Classes="ActionButton CreateButton"
                        Command="{Binding GoCreateWorkflowCommand}">
                    <StackPanel Orientation="Horizontal" Spacing="{DynamicResource Spacing.Md}">
                        <Viewbox Width="15" Height="15" VerticalAlignment="Center">
                            <Path Classes="AddIcon" Data="{DynamicResource AddRegular}"/>
                        </Viewbox>
                        <TextBlock Text="New Workflow" FontWeight="Bold" FontSize="18"/>
                    </StackPanel>
                </Button>
            </Grid>
        </Border>
        
        <Border Grid.Row="1" Classes="MainContentWrapper">
            <Grid RowDefinitions="Auto, *" RowSpacing="{DynamicResource Spacing.Lg}">
                <!-- Info text -->
                <StackPanel Grid.Row="0" Orientation="Vertical" Spacing="{DynamicResource Spacing.Xs}">
                    <TextBlock Classes="PrimaryText HeaderLg">Active Workflows</TextBlock>
                    <TextBlock Classes="SecondaryText ParagraphMd">Manage and automate your local environment</TextBlock>
                </StackPanel>
        
                <partial:WorkflowList Grid.Row="1" DataContext="{Binding WorkflowList}" />
            </Grid>
        </Border>
    </Grid>
</UserControl>